<div class="sidebar-container">
  <mat-nav-list>
    <ng-container *ngIf="!isLoading; else loading">
      <ng-container *ngFor="let item of menuItems">
        <a mat-list-item [routerLink]="item.path" routerLinkActive="active" *ngIf="!item.children.length">
          <mat-icon>{{ item.icon }}</mat-icon>
          <span>{{ item.name }}</span>
        </a>

        <mat-expansion-panel *ngIf="item.children.length" class="mat-elevation-z0">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>{{ item.icon }}</mat-icon>
              <span>{{ item.name }}</span>
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-nav-list>
            <a mat-list-item [routerLink]="child.path" routerLinkActive="active" *ngFor="let child of item.children">
              <mat-icon>{{ child.icon }}</mat-icon>
              <span>{{ child.name }}</span>
            </a>
          </mat-nav-list>
        </mat-expansion-panel>
      </ng-container>
    </ng-container>

    <ng-template #loading>
      <div class="loading-container">
        <mat-spinner diameter="40"></mat-spinner>
      </div>
    </ng-template>
  </mat-nav-list>
</div>
